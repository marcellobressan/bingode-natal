<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ Bingo de Natal - Divers√£o em Fam√≠lia üéÖ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 50%, #1a472a 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Neve caindo */
        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 1em;
            animation: fall linear infinite;
            z-index: 1;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        header {
            background: linear-gradient(135deg, #c41e3a 0%, #d4af37 100%);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            border: 5px solid #fff;
        }

        h1 {
            color: #fff;
            font-size: 3em;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #fff;
            font-size: 1.2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .game-area {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 20px;
            margin-bottom: 30px;
            align-items: start;
        }

        .santa-section {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 5px solid #d4af37;
            text-align: center;
        }

        .santa {
            font-size: 150px;
            animation: santaBounce 2s ease-in-out infinite;
            display: block;
            margin: 20px 0;
        }

        @keyframes santaBounce {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .current-number {
            background: #fff;
            border-radius: 50%;
            width: 180px;
            height: 180px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5em;
            font-weight: bold;
            color: #c41e3a;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            border: 8px solid #d4af37;
            animation: numberPulse 1s ease-in-out;
        }

        @keyframes numberPulse {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }

        .draw-button {
            background: linear-gradient(135deg, #2d5a3d 0%, #165a2f 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.5em;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            font-weight: bold;
            margin: 10px;
            border: 3px solid #d4af37;
        }

        .draw-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }

        .draw-button:active {
            transform: translateY(0);
        }

        .draw-button:disabled {
            background: #666;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .reset-button {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
        }

        .history-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 5px solid #d4af37;
            margin-bottom: 30px;
        }

        .history-title {
            color: #c41e3a;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
        }

        .number-cell {
            aspect-ratio: 1;
            border: 2px solid #2d5a3d;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            background: #fff;
            color: #666;
            transition: all 0.3s;
        }

        .number-cell.drawn {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(196, 30, 58, 0.5);
        }

        .cards-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 5px solid #d4af37;
            overflow-y: auto;
            max-height: 800px;
            display: flex;
            flex-direction: column;
        }

        /* Scrollbar customizada para cards-section */
        .cards-section::-webkit-scrollbar {
            width: 12px;
        }

        .cards-section::-webkit-scrollbar-track {
            background: rgba(45, 90, 61, 0.1);
            border-radius: 10px;
        }

        .cards-section::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #2d5a3d 0%, #165a2f 100%);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        .cards-section::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #d4af37 0%, #f4c430 100%);
        }

        .cards-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .cards-title {
            color: #c41e3a;
            font-size: 2em;
        }

        .add-card-button {
            background: linear-gradient(135deg, #2d5a3d 0%, #165a2f 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            font-weight: bold;
            border: 3px solid #d4af37;
        }

        .add-card-button:hover {
            transform: translateY(-2px);
        }

        .cards-container {
            display: grid;
            gap: 15px;
            flex: 1;
            align-content: start;
        }

        /* Reduzir gap para layouts com muitas cartelas */
        .cards-container.cards-6,
        .cards-container.cards-7,
        .cards-container.cards-8 {
            gap: 12px;
        }

        .cards-container.cards-9,
        .cards-container.cards-10,
        .cards-container.cards-11,
        .cards-container.cards-12,
        .cards-container.cards-many {
            gap: 10px;
        }

        /* 1 cartela: uma coluna, tamanho grande */
        .cards-container.cards-1 {
            grid-template-columns: 1fr;
        }

        /* 2 cartelas: uma coluna, tamanho m√©dio */
        .cards-container.cards-2 {
            grid-template-columns: 1fr;
        }

        /* 3 cartelas: uma coluna, tamanho compacto */
        .cards-container.cards-3 {
            grid-template-columns: 1fr;
        }

        /* 4-5 cartelas: duas colunas */
        .cards-container.cards-4,
        .cards-container.cards-5 {
            grid-template-columns: repeat(2, 1fr);
        }

        /* 6-8 cartelas: duas colunas, mais compactas */
        .cards-container.cards-6,
        .cards-container.cards-7,
        .cards-container.cards-8 {
            grid-template-columns: repeat(2, 1fr);
        }

        /* 9-10 cartelas: tr√™s colunas */
        .cards-container.cards-9,
        .cards-container.cards-10 {
            grid-template-columns: repeat(3, 1fr);
        }

        /* 11-12 cartelas: tr√™s colunas, ultra compacto */
        .cards-container.cards-11,
        .cards-container.cards-12 {
            grid-template-columns: repeat(3, 1fr);
        }

        /* 13+ cartelas: scroll habilitado */
        .cards-container.cards-many {
            grid-template-columns: repeat(3, 1fr);
        }

        .bingo-card {
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
            border: 5px solid #2d5a3d;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            transition: all 0.3s ease;
        }

        /* Ajustes de tamanho baseados na quantidade de cartelas */

        /* 1-2 cartelas: tamanho normal */
        .cards-container.cards-1 .bingo-card,
        .cards-container.cards-2 .bingo-card {
            padding: 15px;
        }

        .cards-container.cards-1 .card-number,
        .cards-container.cards-2 .card-number {
            font-size: 1.5em;
        }

        /* 3 cartelas: um pouco menor */
        .cards-container.cards-3 .bingo-card {
            padding: 12px;
        }

        .cards-container.cards-3 .card-number {
            font-size: 1.3em;
        }

        .cards-container.cards-3 .player-name-input {
            font-size: 1em;
            padding: 10px 40px 10px 12px;
        }

        .cards-container.cards-3 .card-title {
            font-size: 1.2em;
        }

        /* 4-5 cartelas: compacto */
        .cards-container.cards-4 .bingo-card,
        .cards-container.cards-5 .bingo-card {
            padding: 10px;
        }

        .cards-container.cards-4 .card-number,
        .cards-container.cards-5 .card-number {
            font-size: 1.2em;
        }

        .cards-container.cards-4 .player-name-input,
        .cards-container.cards-5 .player-name-input {
            font-size: 0.95em;
            padding: 8px 35px 8px 10px;
        }

        .cards-container.cards-4 .card-title,
        .cards-container.cards-5 .card-title {
            font-size: 1.1em;
        }

        .cards-container.cards-4 .player-name-label,
        .cards-container.cards-5 .player-name-label {
            font-size: 0.8em;
        }

        /* 6-8 cartelas: muito compacto (2 colunas) */
        .cards-container.cards-6 .bingo-card,
        .cards-container.cards-7 .bingo-card,
        .cards-container.cards-8 .bingo-card {
            padding: 8px;
        }

        .cards-container.cards-6 .card-number,
        .cards-container.cards-7 .card-number,
        .cards-container.cards-8 .card-number {
            font-size: 1em;
        }

        .cards-container.cards-6 .player-name-input,
        .cards-container.cards-7 .player-name-input,
        .cards-container.cards-8 .player-name-input {
            font-size: 0.85em;
            padding: 6px 30px 6px 8px;
        }

        .cards-container.cards-6 .card-title,
        .cards-container.cards-7 .card-title,
        .cards-container.cards-8 .card-title {
            font-size: 0.95em;
        }

        .cards-container.cards-6 .player-name-label,
        .cards-container.cards-7 .player-name-label,
        .cards-container.cards-8 .player-name-label {
            font-size: 0.7em;
        }

        .cards-container.cards-6 .remove-card-button,
        .cards-container.cards-7 .remove-card-button,
        .cards-container.cards-8 .remove-card-button {
            padding: 5px 10px;
            font-size: 0.75em;
        }

        .cards-container.cards-6 .edit-icon,
        .cards-container.cards-7 .edit-icon,
        .cards-container.cards-8 .edit-icon {
            font-size: 1em;
        }

        /* 9-10 cartelas: compacto (3 colunas) */
        .cards-container.cards-9 .bingo-card,
        .cards-container.cards-10 .bingo-card {
            padding: 6px;
        }

        .cards-container.cards-9 .card-number,
        .cards-container.cards-10 .card-number {
            font-size: 0.95em;
        }

        .cards-container.cards-9 .player-name-input,
        .cards-container.cards-10 .player-name-input {
            font-size: 0.8em;
            padding: 5px 28px 5px 6px;
        }

        .cards-container.cards-9 .card-title,
        .cards-container.cards-10 .card-title {
            font-size: 0.9em;
        }

        .cards-container.cards-9 .player-name-label,
        .cards-container.cards-10 .player-name-label {
            font-size: 0.65em;
            margin-bottom: 3px;
        }

        .cards-container.cards-9 .remove-card-button,
        .cards-container.cards-10 .remove-card-button {
            padding: 4px 8px;
            font-size: 0.7em;
        }

        .cards-container.cards-9 .edit-icon,
        .cards-container.cards-10 .edit-icon {
            font-size: 0.95em;
        }

        .cards-container.cards-9 .card-grid,
        .cards-container.cards-10 .card-grid {
            gap: 6px;
        }

        /* 11-12 cartelas: ultra compacto (3 colunas) */
        .cards-container.cards-11 .bingo-card,
        .cards-container.cards-12 .bingo-card {
            padding: 5px;
            border: 3px solid #2d5a3d;
        }

        .cards-container.cards-11 .card-number,
        .cards-container.cards-12 .card-number {
            font-size: 0.85em;
            border: 2px solid #2d5a3d;
        }

        .cards-container.cards-11 .player-name-input,
        .cards-container.cards-12 .player-name-input {
            font-size: 0.75em;
            padding: 4px 25px 4px 5px;
        }

        .cards-container.cards-11 .card-title,
        .cards-container.cards-12 .card-title {
            font-size: 0.85em;
        }

        .cards-container.cards-11 .player-name-label,
        .cards-container.cards-12 .player-name-label {
            font-size: 0.6em;
            margin-bottom: 2px;
        }

        .cards-container.cards-11 .remove-card-button,
        .cards-container.cards-12 .remove-card-button {
            padding: 3px 6px;
            font-size: 0.65em;
        }

        .cards-container.cards-11 .edit-icon,
        .cards-container.cards-12 .edit-icon {
            font-size: 0.9em;
            right: 8px;
        }

        .cards-container.cards-11 .card-grid,
        .cards-container.cards-12 .card-grid {
            gap: 5px;
        }

        .cards-container.cards-11 .player-name-wrapper,
        .cards-container.cards-12 .player-name-wrapper {
            margin-bottom: 8px;
        }

        .cards-container.cards-11 .name-saved-feedback,
        .cards-container.cards-12 .name-saved-feedback {
            font-size: 0.7em;
            padding: 3px 8px;
        }

        /* 13+ cartelas: m√≠nimo poss√≠vel com scroll */
        .cards-container.cards-many .bingo-card {
            padding: 5px;
            border: 3px solid #2d5a3d;
        }

        .cards-container.cards-many .card-number {
            font-size: 0.8em;
            border: 2px solid #2d5a3d;
        }

        .cards-container.cards-many .player-name-input {
            font-size: 0.7em;
            padding: 4px 25px 4px 5px;
        }

        .cards-container.cards-many .card-title {
            font-size: 0.8em;
        }

        .cards-container.cards-many .player-name-label {
            font-size: 0.6em;
        }

        .cards-container.cards-many .remove-card-button {
            padding: 3px 6px;
            font-size: 0.6em;
        }

        .cards-container.cards-many .edit-icon {
            font-size: 0.85em;
        }

        .cards-container.cards-many .card-grid {
            gap: 4px;
        }

        .bingo-card.winner {
            animation: winnerGlow 1s ease-in-out infinite;
            border-color: #d4af37;
        }

        @keyframes winnerGlow {
            0%, 100% { box-shadow: 0 0 20px #d4af37; }
            50% { box-shadow: 0 0 40px #d4af37, 0 0 60px #d4af37; }
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            color: #c41e3a;
            font-size: 1.5em;
            font-weight: bold;
        }

        .player-name-wrapper {
            position: relative;
            margin-bottom: 15px;
        }

        .player-name-input {
            background: linear-gradient(135deg, #fff 0%, #f9f9f9 100%);
            border: 3px solid #2d5a3d;
            border-radius: 12px;
            padding: 12px 45px 12px 15px;
            font-size: 1.2em;
            color: #c41e3a;
            font-weight: bold;
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            text-align: center;
            width: 100%;
            transition: all 0.3s ease;
            cursor: text;
        }

        .player-name-input:hover {
            border-color: #d4af37;
            background: #fff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(45, 90, 61, 0.2);
        }

        .player-name-input:focus {
            outline: none;
            border-color: #d4af37;
            background: #fff;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            transform: scale(1.02);
        }

        .player-name-input::placeholder {
            color: #999;
            font-style: italic;
        }

        .edit-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.3em;
            pointer-events: none;
            transition: all 0.3s;
            opacity: 0.6;
        }

        .player-name-wrapper:hover .edit-icon {
            opacity: 1;
            transform: translateY(-50%) scale(1.2);
        }

        .player-name-input:focus + .edit-icon {
            opacity: 1;
            color: #d4af37;
            animation: editPulse 1s ease-in-out infinite;
        }

        @keyframes editPulse {
            0%, 100% { transform: translateY(-50%) scale(1.2); }
            50% { transform: translateY(-50%) scale(1.4); }
        }

        .name-saved-feedback {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #2d5a3d;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
            pointer-events: none;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        .name-saved-feedback.show {
            opacity: 1;
            transform: scale(1);
            animation: feedbackBounce 0.6s ease;
        }

        @keyframes feedbackBounce {
            0% { transform: scale(0); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        .player-name-label {
            display: block;
            color: #2d5a3d;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: left;
            padding-left: 5px;
        }

        .remove-card-button {
            background: #c41e3a;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .card-number {
            aspect-ratio: 1;
            border: 3px solid #2d5a3d;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5em;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            color: #333;
        }

        .card-number:hover {
            transform: scale(1.05);
        }

        .card-number.marked {
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            color: white;
            border-color: #d4af37;
        }

        .card-number.free {
            background: linear-gradient(135deg, #d4af37 0%, #f4c430 100%);
            color: #333;
            cursor: default;
            font-size: 1em;
        }

        .winner-banner {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #d4af37 0%, #f4c430 100%);
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
            z-index: 1000;
            text-align: center;
            border: 8px solid #c41e3a;
            animation: bannerAppear 0.5s ease-out forwards;
        }

        @keyframes bannerAppear {
            to {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .winner-banner h2 {
            color: #c41e3a;
            font-size: 4em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .winner-banner p {
            font-size: 2em;
            color: #333;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .santa-message {
            color: white;
            font-size: 1.3em;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            min-height: 60px;
        }

        @media (max-width: 1200px) {
            .game-area {
                grid-template-columns: 350px 1fr;
            }

            .santa {
                font-size: 120px;
            }

            .cards-section {
                max-height: 700px;
            }
        }

        @media (max-width: 1024px) {
            .game-area {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }

            .santa {
                font-size: 100px;
            }

            .current-number {
                width: 140px;
                height: 140px;
                font-size: 4em;
            }

            .cards-section {
                max-height: none;
                overflow-y: visible;
            }

            .cards-container {
                flex-direction: column;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }

            .numbers-grid {
                grid-template-columns: repeat(5, 1fr);
            }

            .draw-button {
                padding: 15px 30px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <!-- Flocos de neve -->
    <script>
        for (let i = 0; i < 30; i++) {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.innerHTML = '‚ùÑ';
            snowflake.style.left = Math.random() * 100 + '%';
            snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
            snowflake.style.animationDelay = Math.random() * 5 + 's';
            snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
            snowflake.style.opacity = Math.random();
            document.body.appendChild(snowflake);
        }
    </script>

    <div class="overlay" id="overlay"></div>

    <div class="container">
        <header>
            <h1>üéÑ BINGO DE NATAL üéÅ</h1>
            <p class="subtitle">Feliz Natal! Que a sorte esteja com voc√™! ‚≠ê</p>
        </header>

        <div class="game-area">
            <div class="santa-section">
                <div class="santa" id="santa">üéÖ</div>
                <p class="santa-message" id="santaMessage">Ho Ho Ho! Clique em "Sortear N√∫mero" para come√ßar!</p>

                <div id="currentNumberDisplay"></div>

                <button class="draw-button" id="drawButton" onclick="drawNumber()">
                    üé≤ Sortear N√∫mero
                </button>
                <br>
                <button class="draw-button reset-button" onclick="resetGame()">
                    üîÑ Novo Jogo
                </button>
            </div>

            <div class="cards-section">
                <div class="cards-header">
                    <h2 class="cards-title">üé´ Cartelas de Bingo</h2>
                    <button class="add-card-button" onclick="addBingoCard()">
                        ‚ûï Adicionar Cartela
                    </button>
                </div>
                <div class="cards-container" id="cardsContainer"></div>
            </div>
        </div>

        <div class="history-section">
            <h2 class="history-title">üìã N√∫meros Sorteados</h2>
            <div class="numbers-grid" id="numbersGrid"></div>
        </div>
    </div>

    <script>
        // Estado do jogo
        let drawnNumbers = new Set();
        let availableNumbers = [];
        let cards = [];
        let cardIdCounter = 0;
        let isGameActive = false;

        // Atualizar layout das cartelas baseado na quantidade
        function updateCardsLayout() {
            const container = document.getElementById('cardsContainer');
            const numCards = cards.length;

            // Remover todas as classes anteriores
            container.className = 'cards-container';

            // Adicionar classe baseada no n√∫mero de cartelas
            if (numCards === 1) {
                container.classList.add('cards-1');
            } else if (numCards === 2) {
                container.classList.add('cards-2');
            } else if (numCards === 3) {
                container.classList.add('cards-3');
            } else if (numCards === 4) {
                container.classList.add('cards-4');
            } else if (numCards === 5) {
                container.classList.add('cards-5');
            } else if (numCards === 6) {
                container.classList.add('cards-6');
            } else if (numCards === 7) {
                container.classList.add('cards-7');
            } else if (numCards === 8) {
                container.classList.add('cards-8');
            } else if (numCards === 9) {
                container.classList.add('cards-9');
            } else if (numCards === 10) {
                container.classList.add('cards-10');
            } else if (numCards === 11) {
                container.classList.add('cards-11');
            } else if (numCards === 12) {
                container.classList.add('cards-12');
            } else if (numCards >= 13) {
                container.classList.add('cards-many');
            }

            // Controlar scroll: desabilita at√© 12 cartelas, habilita para 13+
            const cardsSection = document.querySelector('.cards-section');
            if (numCards <= 12) {
                cardsSection.style.overflowY = 'visible';
                cardsSection.style.maxHeight = 'none';
            } else {
                cardsSection.style.overflowY = 'auto';
                cardsSection.style.maxHeight = '800px';
            }
        }

        // Mensagens do Papai Noel
        const santaMessages = [
            "Ho Ho Ho! Vamos sortear mais um n√∫mero! üéÖ",
            "A magia do Natal est√° no ar! ‚ú®",
            "Boa sorte, crian√ßas! üéÑ",
            "Quem ser√° o pr√≥ximo vencedor? üéÅ",
            "Feliz Natal para todos! ‚≠ê",
            "Prestem aten√ß√£o no n√∫mero! üîî",
            "A rena Rudolph est√° torcendo por voc√™s! ü¶å",
            "Mais um n√∫mero da sorte! üåü",
            "Continuem marcando suas cartelas! üìù",
            "O esp√≠rito natalino est√° aqui! üéä"
        ];

        // Inicializa√ß√£o
        function initGame() {
            // Criar grade de n√∫meros
            const numbersGrid = document.getElementById('numbersGrid');
            for (let i = 1; i <= 90; i++) {
                const cell = document.createElement('div');
                cell.className = 'number-cell';
                cell.textContent = i;
                cell.id = `num-${i}`;
                numbersGrid.appendChild(cell);
            }

            // Resetar n√∫meros dispon√≠veis
            availableNumbers = Array.from({length: 90}, (_, i) => i + 1);

            // Adicionar 2 cartelas iniciais
            addBingoCard();
            addBingoCard();
        }

        // Sortear n√∫mero
        function drawNumber() {
            if (availableNumbers.length === 0) {
                showSantaMessage("Ho Ho Ho! Todos os n√∫meros foram sorteados! üéâ");
                document.getElementById('drawButton').disabled = true;
                return;
            }

            isGameActive = true;

            // Sortear n√∫mero aleat√≥rio
            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            const number = availableNumbers[randomIndex];
            availableNumbers.splice(randomIndex, 1);
            drawnNumbers.add(number);

            // Atualizar display
            displayCurrentNumber(number);
            markNumberInHistory(number);
            checkAllCards(number);

            // Mensagem do Papai Noel
            const message = santaMessages[Math.floor(Math.random() * santaMessages.length)];
            showSantaMessage(message);

            // Tocar som
            playSound();

            // Animar Papai Noel
            animateSanta();
        }

        // Exibir n√∫mero atual
        function displayCurrentNumber(number) {
            const display = document.getElementById('currentNumberDisplay');
            display.innerHTML = `<div class="current-number">${number}</div>`;
        }

        // Marcar n√∫mero no hist√≥rico
        function markNumberInHistory(number) {
            const cell = document.getElementById(`num-${number}`);
            if (cell) {
                cell.classList.add('drawn');
            }
        }

        // Mostrar mensagem do Papai Noel
        function showSantaMessage(message) {
            const messageEl = document.getElementById('santaMessage');
            messageEl.textContent = message;
        }

        // Animar Papai Noel
        function animateSanta() {
            const santa = document.getElementById('santa');
            const expressions = ['üéÖ', 'ü§∂', 'üéÑ', 'üéÅ', '‚≠ê'];
            let count = 0;

            const interval = setInterval(() => {
                santa.textContent = expressions[count % expressions.length];
                count++;
                if (count > 6) {
                    santa.textContent = 'üéÖ';
                    clearInterval(interval);
                }
            }, 200);
        }

        // Tocar som (usando Web Audio API)
        function playSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = 800;
            oscillator.type = 'sine';

            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // Adicionar cartela de bingo
        function addBingoCard() {
            const cardId = cardIdCounter++;
            const numbers = generateBingoCard();

            cards.push({
                id: cardId,
                name: `Jogador ${cardId + 1}`,
                numbers: numbers,
                marked: new Set()
            });

            renderCard(cardId, numbers);
            updateCardsLayout();
        }

        // Gerar cartela de bingo (5x5 com n√∫meros √∫nicos)
        function generateBingoCard() {
            const card = [];
            const usedNumbers = new Set();

            for (let col = 0; col < 5; col++) {
                const columnNumbers = [];
                const min = col * 18 + 1;
                const max = Math.min(min + 17, 90);

                for (let row = 0; row < 5; row++) {
                    if (col === 2 && row === 2) {
                        // Centro - espa√ßo livre
                        columnNumbers.push('FREE');
                    } else {
                        let num;
                        do {
                            num = Math.floor(Math.random() * (max - min + 1)) + min;
                        } while (usedNumbers.has(num));
                        usedNumbers.add(num);
                        columnNumbers.push(num);
                    }
                }
                card.push(columnNumbers);
            }

            return card;
        }

        // Renderizar cartela
        function renderCard(cardId, numbers) {
            const container = document.getElementById('cardsContainer');
            const cardDiv = document.createElement('div');
            cardDiv.className = 'bingo-card';
            cardDiv.id = `card-${cardId}`;

            const card = cards.find(c => c.id === cardId);
            const playerName = card ? card.name : `Jogador ${cardId + 1}`;

            let html = `
                <div class="card-header">
                    <div class="card-title">üé´ Cartela ${cardId + 1}</div>
                    <button class="remove-card-button" onclick="removeCard(${cardId})">‚ùå Remover</button>
                </div>
                <div class="player-name-wrapper" id="name-wrapper-${cardId}">
                    <label class="player-name-label">üë§ Nome do Jogador:</label>
                    <input type="text"
                           class="player-name-input"
                           id="player-name-${cardId}"
                           value="${playerName}"
                           onchange="updatePlayerName(${cardId}, this.value)"
                           onblur="updatePlayerName(${cardId}, this.value)"
                           onfocus="onNameFocus(${cardId})"
                           placeholder="Clique para editar o nome..."
                           maxlength="25">
                    <span class="edit-icon">‚úèÔ∏è</span>
                    <span class="name-saved-feedback" id="feedback-${cardId}">‚úì Salvo!</span>
                </div>
                <div class="card-grid">
            `;

            // Transpor a matriz para renderizar linha por linha
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    const num = numbers[col][row];
                    const isFree = num === 'FREE';
                    const classes = isFree ? 'card-number free' : 'card-number';
                    const onclick = isFree ? '' : `onclick="toggleNumber(${cardId}, ${num})"`;
                    const id = isFree ? '' : `id="card-${cardId}-num-${num}"`;

                    html += `<div class="${classes}" ${onclick} ${id}>${isFree ? '‚òÖ' : num}</div>`;
                }
            }

            html += '</div>';
            cardDiv.innerHTML = html;
            container.appendChild(cardDiv);
        }

        // Atualizar nome do jogador
        function updatePlayerName(cardId, newName) {
            const card = cards.find(c => c.id === cardId);
            if (!card) return;

            // Validar e limpar o nome
            const cleanName = newName.trim();

            // Se vazio, usar nome padr√£o
            if (!cleanName) {
                card.name = `Jogador ${cardId + 1}`;
                const input = document.getElementById(`player-name-${cardId}`);
                if (input) {
                    input.value = card.name;
                }
            } else {
                card.name = cleanName;
            }

            // Mostrar feedback visual
            showNameSavedFeedback(cardId);
        }

        // Mostrar feedback de nome salvo
        function showNameSavedFeedback(cardId) {
            const feedback = document.getElementById(`feedback-${cardId}`);
            if (!feedback) return;

            // Adicionar classe para mostrar
            feedback.classList.add('show');

            // Remover ap√≥s 2 segundos
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 2000);
        }

        // Quando o campo de nome recebe foco
        function onNameFocus(cardId) {
            const input = document.getElementById(`player-name-${cardId}`);
            if (!input) return;

            // Selecionar todo o texto para facilitar a edi√ß√£o
            setTimeout(() => {
                input.select();
            }, 50);
        }

        // Marcar/desmarcar n√∫mero na cartela
        function toggleNumber(cardId, number) {
            if (!isGameActive) return;

            const card = cards.find(c => c.id === cardId);
            if (!card) return;

            const cell = document.getElementById(`card-${cardId}-num-${number}`);
            if (!cell) return;

            if (drawnNumbers.has(number)) {
                if (card.marked.has(number)) {
                    card.marked.delete(number);
                    cell.classList.remove('marked');
                } else {
                    card.marked.add(number);
                    cell.classList.add('marked');
                    checkBingo(cardId);
                }
            }
        }

        // Verificar automaticamente n√∫meros em todas as cartelas
        function checkAllCards(number) {
            cards.forEach(card => {
                // Verificar se a cartela tem esse n√∫mero
                let hasNumber = false;
                for (let col = 0; col < 5; col++) {
                    for (let row = 0; row < 5; row++) {
                        if (card.numbers[col][row] === number) {
                            hasNumber = true;
                            break;
                        }
                    }
                    if (hasNumber) break;
                }

                // Marcar automaticamente o n√∫mero na cartela
                if (hasNumber) {
                    const cell = document.getElementById(`card-${card.id}-num-${number}`);
                    if (cell && !cell.classList.contains('marked')) {
                        // Marcar automaticamente
                        card.marked.add(number);
                        cell.classList.add('marked');

                        // Anima√ß√£o de destaque
                        cell.style.animation = 'numberPulse 0.5s ease-in-out';
                        setTimeout(() => {
                            if (cell) cell.style.animation = '';
                        }, 500);

                        // Verificar se ganhou
                        checkBingo(card.id);
                    }
                }
            });
        }

        // Verificar bingo
        function checkBingo(cardId) {
            const card = cards.find(c => c.id === cardId);
            if (!card) return;

            // Adicionar centro livre √†s marcadas
            const markedWithFree = new Set([...card.marked, 'FREE']);

            // Verificar linhas
            for (let row = 0; row < 5; row++) {
                let complete = true;
                for (let col = 0; col < 5; col++) {
                    const num = card.numbers[col][row];
                    if (!markedWithFree.has(num)) {
                        complete = false;
                        break;
                    }
                }
                if (complete) {
                    showWinner(cardId, 'linha');
                    return;
                }
            }

            // Verificar colunas
            for (let col = 0; col < 5; col++) {
                let complete = true;
                for (let row = 0; row < 5; row++) {
                    const num = card.numbers[col][row];
                    if (!markedWithFree.has(num)) {
                        complete = false;
                        break;
                    }
                }
                if (complete) {
                    showWinner(cardId, 'coluna');
                    return;
                }
            }

            // Verificar cartela completa
            let totalNumbers = 0;
            for (let col = 0; col < 5; col++) {
                for (let row = 0; row < 5; row++) {
                    const num = card.numbers[col][row];
                    if (markedWithFree.has(num)) {
                        totalNumbers++;
                    }
                }
            }
            if (totalNumbers === 25) {
                showWinner(cardId, 'cartela completa');
            }
        }

        // Mostrar vencedor
        function showWinner(cardId, type) {
            const card = cards.find(c => c.id === cardId);
            const playerName = card ? card.name : `Jogador ${cardId + 1}`;

            const cardDiv = document.getElementById(`card-${cardId}`);
            cardDiv.classList.add('winner');

            const overlay = document.getElementById('overlay');
            overlay.classList.add('active');

            const banner = document.createElement('div');
            banner.className = 'winner-banner';
            banner.innerHTML = `
                <h2>üéâ BINGO! üéâ</h2>
                <p style="font-size: 2.5em; font-weight: bold; margin: 20px 0;">${playerName}</p>
                <p>Venceu com ${type}!</p>
                <p style="font-size: 3em; margin-top: 20px;">üéÖüéÑüéÅ</p>
            `;
            document.body.appendChild(banner);

            // Atualizar mensagem do Papai Noel
            showSantaMessage(`üéâ Parab√©ns ${playerName}! BINGO! üéâ`);

            // Tocar som de vit√≥ria
            playWinSound();

            // Remover banner ap√≥s 5 segundos
            setTimeout(() => {
                banner.remove();
                overlay.classList.remove('active');
            }, 5000);
        }

        // Som de vit√≥ria
        function playWinSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [523.25, 659.25, 783.99, 1046.50]; // C, E, G, C

            notes.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = freq;
                oscillator.type = 'sine';

                const startTime = audioContext.currentTime + (index * 0.2);
                gainNode.gain.setValueAtTime(0.3, startTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.3);

                oscillator.start(startTime);
                oscillator.stop(startTime + 0.3);
            });
        }

        // Remover cartela
        function removeCard(cardId) {
            cards = cards.filter(c => c.id !== cardId);
            const cardDiv = document.getElementById(`card-${cardId}`);
            if (cardDiv) {
                cardDiv.remove();
            }
            updateCardsLayout();
        }

        // Resetar jogo
        function resetGame() {
            if (!confirm('Tem certeza que deseja iniciar um novo jogo?')) {
                return;
            }

            // Limpar n√∫meros sorteados
            drawnNumbers.clear();
            availableNumbers = Array.from({length: 90}, (_, i) => i + 1);

            // Resetar grid de hist√≥rico
            for (let i = 1; i <= 90; i++) {
                const cell = document.getElementById(`num-${i}`);
                if (cell) {
                    cell.classList.remove('drawn');
                }
            }

            // Limpar display do n√∫mero atual
            document.getElementById('currentNumberDisplay').innerHTML = '';

            // Resetar cartelas
            cards.forEach(card => {
                card.marked.clear();
                const cardDiv = document.getElementById(`card-${card.id}`);
                if (cardDiv) {
                    cardDiv.classList.remove('winner');
                    const cells = cardDiv.querySelectorAll('.card-number.marked');
                    cells.forEach(cell => cell.classList.remove('marked'));
                }
            });

            // Reativar bot√£o de sortear
            document.getElementById('drawButton').disabled = false;

            // Resetar Papai Noel
            document.getElementById('santa').textContent = 'üéÖ';
            showSantaMessage('Ho Ho Ho! Novo jogo come√ßando! Boa sorte! üéÑ');

            isGameActive = false;
        }

        // Iniciar jogo ao carregar
        window.onload = initGame;
    </script>
</body>
</html>
